[{"content":"Even though adding scripting language to the engine was in DEEP FUTURE plans, once I realized how easy it would be to just rewrite one text line, hit enter and spawn particles with slightly tweaked velocities instead of recompiling the whole game again I finally decided that that time had come. Ladies and gentlemen, Brace yourself for\u0026hellip;\nThe Story of adding Lua: Adding lua itself was the easiest thing, simply add statically native lua lib and that was it, then I used ConsoleWindow template found in imgui_demo.cpp and suddenly I could use Lua console within the game itself :D\nThe real pain, unfortunately, had yet to come. To use it to interact with the engine and with a world eventually, I needed to register and hook some C++ methods to be accessible by lua. I immediately added ND_INFO() to print messages using native lua lib. So far so good. Then I realized that\u0026rsquo;s too much of the work and that I would use some third-party libs that would bridge that gap for me.\nAnd with the biggest tool in the shed I went: SWIG.(Simplified Wrapper and Interface Generator). It generates C++ files called e.g. classname_wrapper.cxx or something. special method in those files needs to be called and then you have working lua-c++ interface Yay\u0026hellip;\nFor a while my desire was satisfied. Then I though about some more simple or elegant method (which was the begging of the end (my end)). I searched and found luabind, an awesome library that seems to provide simple interface to easily bind classes to lua as well (btw SWIG can do that too). I tried to compile it with the engine but compiler was so nice and politely informed me that I hadn\u0026rsquo;t read the READMEs.\nWell this lib seems to need a Boost?. That was actually my first encounter with the vast library of libraries so I naively thought I could just include it in my project and guess what\u0026hellip; It didn\u0026rsquo;t work. Up to this day I still haven\u0026rsquo;t find a way to successfully import it (\u0026ldquo;one day I swear I will beat you!\u0026rdquo;). With this option out of the way I tried the deboostified version of luabind for which the linker found the courage to tell me about his inability to found some symbol definition which I was deeply sure was happily contained in one cpp file. And so I dropped the idea of using luabind completely\u0026hellip; Farewell.\nIn the end after possibly 1 week of trials and errors I settled with an incredibly simple lib LuaBridge that doesn\u0026rsquo;t need anything and uses templates. What a great adventure! LuaBridge helped me to bind glm::vectors to lua as well as method World::spawnParticle() and with that I could finally make a loop and spawn as many goddamned particles as I wanted. The End (at least for now)\nAnd now other important XMas presents: Finally the long awaited Items have arrived:\nItems have unique string ids (uint64_t hashed versions are used to speed up the lookup time) using FNV-1a\nAdded EntityItem which represents item dropped in the world\nApart from inventory system also HUD system was made:\nHUD is a GUIWindow to which you can register GUIEntities\nGUIEntities have nothing to do with world and can represent for example HealthBar, ManaBar, ActionInventorySlots, CraftingInventory, ChestSlots \u0026hellip;\nIt\u0026rsquo;s important to note that its mandatory for gui system and world system to be \u0026ldquo;decoupled\u0026rdquo; (the world shouldn\u0026rsquo;t care if HealthBar is showed) (on the other hand GUIEntity needs to communicate with World/entities)\n-\u0026gt; This is due to the fact that in the future, there might be multiplayer where server will definitely not care about some puny pathetic GUI stuff\nAnd about Christmas, SnowmanEntity can be spawned using pumpkin stacked onto a pile of snow. Slippery ice blocks were added as well. That\u0026rsquo;s all for now. Happy XMAS.\nIn the pic: ItemEntities circling around the player. You wouldn\u0026rsquo;t have guessed how easy it is to get to the stable orbital position :D\n","permalink":"https://cooble.github.io/posts/niceday/_posts/2019-12-24-lua/","summary":"Even though adding scripting language to the engine was in DEEP FUTURE plans, once I realized how easy it would be to just rewrite one text line, hit enter and spawn particles with slightly tweaked velocities instead of recompiling the whole game again I finally decided that that time had come. Ladies and gentlemen, Brace yourself for\u0026hellip;\nThe Story of adding Lua: Adding lua itself was the easiest thing, simply add statically native lua lib and that was it, then I used ConsoleWindow template found in imgui_demo.","title":"Lua, Items and XMas"},{"content":"","permalink":"https://cooble.github.io/aboutme/","summary":"","title":"About Me"},{"content":"We all know that making a GUI from scratch can be truly difficult and time consuming and maybe even boring, it would make sense then if engine provided such a thing, wouldn\u0026rsquo;t it? Ok, Ok, lets do it\u0026hellip; (I could have just used IMGUI but\u0026hellip;)\nBasic GUI module in engine (13_11_2019) in order to start with inventory, one must create some sort of GUI before\u0026hellip; currently contains Windows (which can overlap), Label, Button, CheckBox, TextBox, HorizontalSlider and Image + layouts: (Column, Row, Grid) There is one GUIContext which cares about parent-child structure and events of GUIElements and GUIRenderer, which renders those elements positions are relative to the parental element currently no resizability to change a color, one has to change the GUIRenderer Advanced GUI in engine (23_11_2019) Added view, (which is rendered to another texture before being rendered on the screen) Better text render, added kerning! Vertical Slider Horizontal and Vertical Split Its really dynamic :D - resizable, ability to inherit dimensions from parent nodes And last but not least.. HAPPY 100TH COMMIT! Yay :D ","permalink":"https://cooble.github.io/posts/niceday/_posts/2019-11-23-gui/","summary":"We all know that making a GUI from scratch can be truly difficult and time consuming and maybe even boring, it would make sense then if engine provided such a thing, wouldn\u0026rsquo;t it? Ok, Ok, lets do it\u0026hellip; (I could have just used IMGUI but\u0026hellip;)\nBasic GUI module in engine (13_11_2019) in order to start with inventory, one must create some sort of GUI before\u0026hellip; currently contains Windows (which can overlap), Label, Button, CheckBox, TextBox, HorizontalSlider and Image + layouts: (Column, Row, Grid) There is one GUIContext which cares about parent-child structure and events of GUIElements and GUIRenderer, which renders those elements positions are relative to the parental element currently no resizability to change a color, one has to change the GUIRenderer Advanced GUI in engine (23_11_2019) Added view, (which is rendered to another texture before being rendered on the screen) Better text render, added kerning!","title":"GUI Module (Engine)"},{"content":"Multithreaded lights, Inheritance Entity System (maybe will change to ECS in the future)(22_07_2019) Added NBT to save and load entities. (No entity saving yet, though.) Added basic physics system with polygon collision detection. In the pic: The first entity after Player was (who would have guessed\u0026hellip;) TNT!\nIn the pic: red Zombie attacks black Player. (and then mysteriously disappears up in the sky)\nSmooth wallLight vs edgy blockLight, Day/Night cycle (12_08_2019) Added dynamically created TextureAtlas. Added painting and multiblock structure support. Oh, shoot!\n","permalink":"https://cooble.github.io/posts/niceday/_posts/2019-08-12-dynamic-lights/","summary":"Multithreaded lights, Inheritance Entity System (maybe will change to ECS in the future)(22_07_2019) Added NBT to save and load entities. (No entity saving yet, though.) Added basic physics system with polygon collision detection. In the pic: The first entity after Player was (who would have guessed\u0026hellip;) TNT!\nIn the pic: red Zombie attacks black Player. (and then mysteriously disappears up in the sky)\nSmooth wallLight vs edgy blockLight, Day/Night cycle (12_08_2019) Added dynamically created TextureAtlas.","title":"Lights, Day/Night cycle, Entities"},{"content":" Ability to walk on blocks which are 1high without jumping. Player has a walk animation. Added entity health bar. Crude ParticleSystem using BatchRenderer2D temporarily, will have its own renderer with shader in the future. Can do 3500 particles without a problem. Added multiblock structure = tree and its generator. After placing a sapling block, sapling tile entity counts the worldtime and then calls TreeGen. Trees have random number of branches(dry or normal) and random corona. Everybody loves flowers. and graaasss. (Sheep are in sight :D) ","permalink":"https://cooble.github.io/posts/niceday/_posts/2019-08-25-particles/","summary":"Ability to walk on blocks which are 1high without jumping. Player has a walk animation. Added entity health bar. Crude ParticleSystem using BatchRenderer2D temporarily, will have its own renderer with shader in the future. Can do 3500 particles without a problem. Added multiblock structure = tree and its generator. After placing a sapling block, sapling tile entity counts the worldtime and then calls TreeGen. Trees have random number of branches(dry or normal) and random corona.","title":"ParticleSystem, Trees, Flowers, PlayerSprite"},{"content":"Pictured changelog: Basic tile render (03_05_2019) Corner tile render (06_05_2019) Lighting prototype with water-spill-algorithm (18_05_2019) Platforms, grass, sky (20_05_2019) Blocks, Walls, Background (26_05_2019) Colorful block corners, glass, procedural chunk generation (14_06_2019) Dynamic and Cached monochromatic lighting system (19_06_2019) Cached lighting is only calculated onBlockChange ","permalink":"https://cooble.github.io/posts/niceday/_posts/2019-06-19-great-start/","summary":"Pictured changelog: Basic tile render (03_05_2019) Corner tile render (06_05_2019) Lighting prototype with water-spill-algorithm (18_05_2019) Platforms, grass, sky (20_05_2019) Blocks, Walls, Background (26_05_2019) Colorful block corners, glass, procedural chunk generation (14_06_2019) Dynamic and Cached monochromatic lighting system (19_06_2019) Cached lighting is only calculated onBlockChange ","title":"The Great Start"}]